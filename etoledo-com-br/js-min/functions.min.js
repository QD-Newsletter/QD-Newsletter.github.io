$(document).ready(function(){var e=$(".qd-v1-modal-newsletter");e.modal({backdrop:"static",keyboard:!1}),e.on("hidden.bs.modal",function(){window.parent.postMessage("QdSn2Msg|noclose","*")}),$(document).ready(function(){$("#dia_compra").mask("00/00/0000")})}),$(function(){var e=$("form"),r=(decodeURIComponent(window.location.search).match(/code=([^&]+)/)||[""]).pop().split("+");1<r.length&&($("#numero_pedido").val(r[0]||"").attr("readonly","readonly"),$("#dia_compra").val(moment(r[2]||"").format("DD/MM/YYYY")).attr("readonly","readonly")),e.validate({rules:{email:{email:!0}},submitHandler:function(e){var a=$(e);if(a.valid()){a.find("[name]");var o=a.find("#dia_compra");if(!moment(o.val(),"DD/MM/YYYY",!0).isValid())return o.addClass("error"),!1;a.addClass("qd-loading");var n=a.serializeObject();return n.dia_compra=1<r.length?r[2]||"":(n.dia_compra||"").split("/").reverse().join("-"),n.valor_pedido=1<r.length?"$ "+r[1]:"",$.ajax({url:"//api.vtexcrm.com.br/etoledo/dataentities/CF/documents",type:"PATCH",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(n),success:function(e){$(".success-mensaje").removeClass("hide"),$(".main-form").addClass("hide"),a.trigger("QD.crmSuccess",[e])},error:function(){alert("Desculpe, não foi possível enviar seu formulário!")},complete:function(){a.removeClass("qd-loading")}}),!1}},errorPlacement:function(e,a){}})});